/*=============================================================================
// Fast 2011/08/31
// Last 2022/05/31  Ver1.10                                      (c)Tsuyoshi.A
=============================================================================*/
#ifndef _MTO_DIR_H_
#define _MTO_DIR_H_

// POSIX準拠の環境のみ使える
#if defined(LINUX) || defined(UNIX)

#include <dirent.h>
#include <sys/stat.h>

struct DirInfo { 
    DIR     *pDir;
    char    path[_MAX_PATH];
};

/*=======================================================================
【機能】ディレクトリオープン
【引数】pDirInfo: ディレクトリ情報のポインタ
        path    : ディレクトリパス(末尾の"/"は不要)
【戻値】true: オープン成功
 =======================================================================*/
bool mto_open_dir(struct DirInfo *pDirInfo, const char *path);

/*=======================================================================
【機能】ファイルパスの取得
【引数】pDirInfo: ディレクトリ情報のポインタ 
        pOutPath: ファイルパス保存先
        pathSize: ファイルパス保存先のサイズ
        bDir    : ファイル名にパスをつける？
【戻値】falseで終了 
 =======================================================================*/
bool mto_get_filepath(struct DirInfo *pDirInfo, char *pOutPath, const uint32_t pathSize, const bool bDir);

/*=======================================================================
【機能】ディレクトリパスの取得
【引数】pDirInfo: ディレクトリ情報のポインタ 
【戻値】ディレクトリパスのポインタ
 =======================================================================*/
const char *mto_get_dirpath(const struct DirInfo *pDirInfo);

/*=======================================================================
【機能】ディレクトリクローズ
【引数】pDirInfo: ディレクトリ情報のポインタ 
【戻値】ディレクトリパスのポインタ
 =======================================================================*/
void mto_close_dir(struct DirInfo *pDirInfo);

#endif // LINUX
#endif
